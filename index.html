<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Gewinnspiel</title>
    <style>
      :root {
        --bg1: #eef2ff;
        --bg2: #fdf2f8;
        --text: #0f172a;
        --panel: #ffffff;
        --accent: #2563eb;
        --accent-2: #d946ef;
        --muted: #64748b;
        --shadow: 0 8px 28px rgba(2, 8, 23, 0.12);
      }
      * {
        box-sizing: border-box;
      }
      /* Standard, kein Flex mehr hier */
      html,
      body {
        height: 100%;
        margin: 0;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica,
          Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--text);
        background: linear-gradient(135deg, var(--bg1), var(--bg2));
        overflow-x: hidden;
      }

      /* ZENTRIERUNG mit dynamic viewport + Safe Area */
      .screen {
        min-height: 100dvh; /* <- wichtig f√ºr iOS Safari */
        display: grid;
        place-items: center;
        /* Safe-Area-Polster gegen die iOS-Leisten */
        padding: max(1rem, env(safe-area-inset-top))
          max(1rem, env(safe-area-inset-right))
          max(1rem, env(safe-area-inset-bottom))
          max(1rem, env(safe-area-inset-left));
      }

      .card {
        width: min(720px, 92vw);
        background: var(--panel);
        border-radius: 18px;
        box-shadow: var(--shadow);
        padding: 2rem;
        text-align: center;
        position: relative;
      }
      h1,
      h2 {
        margin: 0.25rem 0 1rem 0;
        font-size: clamp(1.4rem, 2.4vw + 0.8rem, 2rem);
      }
      p {
        margin: 0.5rem 0 1.25rem 0;
        line-height: 1.6;
      }
      .btn-row {
        display: flex;
        gap: 1rem;
        justify-content: center;
        flex-wrap: wrap;
      }
      button {
        appearance: none;
        border: none;
        border-radius: 999px;
        padding: 0.9rem 1.4rem;
        font-weight: 700;
        cursor: pointer;
        background: var(--accent);
        color: #fff;
        font-size: 1rem;
        transition: transform 0.15s ease, background-color 0.15s ease,
          box-shadow 0.15s ease;
        box-shadow: var(--shadow);
      }
      button.secondary {
        background: var(--accent-2);
      }
      button.ghost {
        background: #e5e7eb;
        color: #111827;
      }
      button:hover {
        transform: translateY(-1px);
      }
      button:active {
        transform: translateY(0);
      }
      button:focus-visible {
        outline: 3px solid rgba(37, 99, 235, 0.35);
        outline-offset: 3px;
      }
      .muted {
        color: var(--muted);
      }
      .route {
        display: none;
        opacity: 0;
        transform: translateY(8px);
        transition: opacity 0.24s ease, transform 0.24s ease;
      }
      .route.show {
        display: block;
        opacity: 1;
        transform: translateY(0);
      }
      .badge {
        display: inline-block;
        background: #ecfeff;
        color: #155e75;
        border: 1px solid #99f6e4;
        padding: 0.35rem 0.6rem;
        border-radius: 999px;
        font-size: 0.85rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
      }
      img.gif {
        max-width: 100%;
        border-radius: 12px;
        margin-top: 1rem;
        box-shadow: var(--shadow);
      }
      .mute-toggle {
        position: absolute;
        top: 0.75rem;
        right: 0.75rem;
        background: #f1f5f9;
        border: 1px solid #cbd5e1;
        border-radius: 999px;
        padding: 0.35rem 0.7rem;
        font-weight: 600;
        cursor: pointer;
      }
      .timer {
        font-variant-numeric: tabular-nums;
        font-size: clamp(1.6rem, 3vw + 1rem, 2.5rem);
        letter-spacing: 0.02em;
      }
      .sub {
        color: var(--muted);
        margin-top: -0.5rem;
      }
      .hidden {
        display: none !important;
      }
      .pill {
        display: inline-block;
        background: #eef2ff;
        border: 1px solid #c7d2fe;
        color: #3730a3;
        border-radius: 999px;
        padding: 0.25rem 0.6rem;
        font-weight: 600;
        font-size: 0.9rem;
        margin-bottom: 0.5rem;
      }
      /* --- Optimierungen f√ºr iPhone 13 & √§hnliche Ger√§te --- */
      @media (max-width: 430px) {
        .card {
          padding: 1.2rem; /* weniger Rand, mehr Platz f√ºr Inhalt */
          border-radius: 14px;
        }
        h1,
        h2 {
          font-size: 1.3rem; /* kleinere √úberschrift */
        }
        p {
          font-size: 0.95rem; /* lesbar, aber platzsparend */
        }
        button {
          padding: 0.85rem 1.2rem; /* Buttons nicht zu breit */
          font-size: 0.95rem;
        }
        img.gif {
          max-width: 90%; /* GIFs f√ºllen fast ganze Breite */
          height: auto;
        }
        .timer {
          font-size: 1.8rem; /* Countdown gut sichtbar */
        }
      }
    </style>
  </head>
  <body>
    <main class="screen">
      <section class="card">
        <button
          id="muteBtn"
          class="mute-toggle"
          aria-pressed="false"
          title="Ton stummschalten"
        >
          üîä Ton an
        </button>

        <!-- TIMER -->
        <div
          id="timer"
          class="route show"
          role="region"
          aria-labelledby="timer-title"
        >
          <div class="pill">Countdown</div>
          <h1 id="timer-title">
            Die Seite ist aktuell noch gesperrt. Wir bitten um etwas Geduld
          </h1>
          <div id="countdown" class="timer">--:--:--</div>
          <div class="btn-row" style="margin-top: 1rem">
            <button id="btn-skip" class="hidden">Jetzt mitspielen</button>
          </div>
        </div>

        <!-- HOME -->
        <div id="home" class="route">
          <div class="badge">Hauptseite</div>
          <h1>Wollen Sie an einem Gewinnspiel teilnehmen?</h1>
          <p class="muted">Bitte w√§hlen Sie eine Option.</p>
          <div class="btn-row">
            <button id="btn-ja">Ja</button>
            <button id="btn-nein" class="ghost">Nein</button>
          </div>
        </div>

        <!-- TERMS -->
        <div id="terms" class="route">
          <div class="badge">Rahmenbedingungen</div>
          <h2>Gewinnspiel ‚Äì Rahmenbedingungen</h2>
          <p><strong>Gewinnspiel nur f√ºr arme Menschen g√ºltig.</strong></p>
          <div class="btn-row">
            <button id="btn-arm" class="secondary">Ich bin arm</button>
            <button id="btn-geld" class="ghost">Ich hab Geld</button>
          </div>
        </div>

        <!-- PRIZE -->
        <div id="prize" class="route">
          <div class="badge">Gewonnen!</div>
          <h2>Gl√ºckwunsch! üéâ</h2>
          <div id="prize-step1">
            <p>Du hast <strong>50&nbsp;‚Ç¨ gewonnen!</strong> üí∏</p>
            <div class="btn-row" style="margin-top: 0.5rem">
              <button id="btn-redeem" class="secondary">
                Gewinncode einl√∂sen
              </button>
            </div>
          </div>
          <div id="prize-step2" class="hidden">
            <p>
              Gl√ºckwunsch! Soeben wurde die Kosten f√ºr CHN Inlandsfl√ºge von
              <strong>Alex</strong> √ºbernommen! ‚Äì Viel Spa√ü! ‚úàÔ∏è
            </p>
            <img src="BDAY.gif" alt="Geburtstags-Feier" class="gif" />
            <p style="margin-top: 1rem; color: #64748b; font-style: italic">
              Aufgrund Ihres fortgeschrittenen Alters empfehlen wir, einen
              <strong>Gehstock</strong> f√ºr die Reise einzuplanen. üòâ
            </p>
          </div>
          <div class="btn-row" style="margin-top: 1rem">
            <button id="btn-home-from-prize">Zur√ºck zur Hauptseite</button>
          </div>
        </div>

        <!-- RICH -->
        <div id="rich" class="route">
          <div class="badge">Info</div>
          <h2>Das glaubst du doch selber nicht üòÇ</h2>
          <img src="laugh.gif" alt="Lachen" class="gif" />
          <div class="btn-row" style="margin-top: 1rem">
            <button id="btn-home-from-rich">Zur√ºck zur Hauptseite</button>
          </div>
        </div>

        <!-- NEIN -->
        <div id="nope" class="route">
          <div class="badge">Abgelehnt</div>
          <h2>Dann halt nicht :(</h2>
          <p class="muted">Vielleicht beim n√§chsten Mal.</p>
          <div class="btn-row" style="margin-top: 1rem">
            <button id="btn-home-from-nope">Zur√ºck zur Hauptseite</button>
          </div>
        </div>
      </section>
    </main>

    <!-- Audio -->
    <audio id="audio-prize" src="cheer.mp3" preload="auto"></audio>
    <audio id="audio-rich" src="laugh.mp3" preload="auto"></audio>

    <script>
      const routes = ["timer", "home", "terms", "prize", "rich", "nope"];
      const targetDate = new Date("2025-08-20T00:00:00"); // Zielzeitpunkt
      const countdownEl = document.getElementById("countdown");
      const skipBtn = document.getElementById("btn-skip");
      let muted = false;

      const audioPrize = document.getElementById("audio-prize");
      const audioRich = document.getElementById("audio-rich");
      const step1 = document.getElementById("prize-step1");
      const step2 = document.getElementById("prize-step2");

      function stopAllAudio() {
        [audioPrize, audioRich].forEach((a) => {
          a.pause();
          a.currentTime = 0;
        });
      }

      function show(id) {
        routes.forEach((r) => {
          const el = document.getElementById(r);
          el.classList.toggle("show", r === id);
          el.setAttribute("aria-hidden", String(r !== id));
        });
        if (id === "prize") {
          step1.classList.remove("hidden");
          step2.classList.add("hidden");
        }
        stopAllAudio();
        if (!muted && id === "rich") audioRich.play().catch(() => {});
      }

      function updateCountdown() {
        const now = new Date();
        const diff = targetDate - now;

        if (diff <= 0) {
          countdownEl.textContent = "00:00:00";
          skipBtn.classList.remove("hidden"); // Button freischalten
          return;
        }
        const h = String(Math.floor(diff / 3600000)).padStart(2, "0");
        const m = String(Math.floor((diff % 3600000) / 60000)).padStart(2, "0");
        const s = String(Math.floor((diff % 60000) / 1000)).padStart(2, "0");
        countdownEl.textContent = `${h}:${m}:${s}`;
      }

      setInterval(updateCountdown, 1000);
      updateCountdown();

      // Buttons
      skipBtn.addEventListener("click", () => show("home"));
      document
        .getElementById("btn-ja")
        .addEventListener("click", () => show("terms"));
      document
        .getElementById("btn-nein")
        .addEventListener("click", () => show("nope"));
      document
        .getElementById("btn-arm")
        .addEventListener("click", () => show("prize"));
      document
        .getElementById("btn-geld")
        .addEventListener("click", () => show("rich"));
      document
        .getElementById("btn-home-from-prize")
        .addEventListener("click", () => show("home"));
      document
        .getElementById("btn-home-from-rich")
        .addEventListener("click", () => show("home"));
      document
        .getElementById("btn-home-from-nope")
        .addEventListener("click", () => show("home"));

      // Gewinncode
      document.getElementById("btn-redeem").addEventListener("click", () => {
        step1.classList.add("hidden");
        step2.classList.remove("hidden");
        stopAllAudio();
        if (!muted) audioPrize.play().catch(() => {});
      });

      // Mute-Schalter
      const muteBtn = document.getElementById("muteBtn");
      muteBtn.addEventListener("click", () => {
        muted = !muted;
        muteBtn.textContent = muted ? "üîá Ton aus" : "üîä Ton an";
        [audioPrize, audioRich].forEach((a) => (a.muted = muted));
        if (muted) stopAllAudio();
      });
    </script>
  </body>
</html>
